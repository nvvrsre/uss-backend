
# Argo CD Installation on AWS EKS

## Step 1: Prerequisites

- **EKS Cluster**: Already running.
- **kubectl**: Installed and configured for your EKS cluster.
- **IAM Permissions**: Admin or equivalent permissions on the cluster.

## Step 2: Create the `argocd` Namespace

```bash
kubectl create namespace argocd
```

## Step 3: Install Argo CD Core Components

```bash
kubectl apply -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
```

## Patch the ArgoCD server deployment for Insecure Mode
## You need to add --insecure to the argocd-server container args.

 kubectl patch deployment argocd-server \
  --type='json' \
  -p='[{"op":"add","path":"/spec/template/spec/containers/0/args/-","value":"--insecure"}]'


## Make Sure the Service Exposes HTTP
## Your service should already expose 80:8080 as HTTP (if not, patch it):

  kubectl patch svc argocd-server \
  -p '{"spec": {"ports": [{"name": "http", "port": 80, "targetPort": 8080}]}}'




## Step 4: Expose Argo CD API Server via LoadBalancer

```bash
kubectl patch svc argocd-server -p '{"spec": {"type": "LoadBalancer"}}'
```

## Step 5: Get the Argo CD Server Address

```bash
kubectl get svc argocd-server 
```
- Note the EXTERNAL-IP or hostname in the output. Use this address in your browser with **https** (port 443).

## Wait for 2-3 mintues then open LoadBalancer

## Step 6: Get the Initial Admin Password

```bash
kubectl  get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
```
- Username: `admin`
- Password: (the value from above)

## Step 7: Login to the Argo CD UI

- Open your browser and go to `https://<EXTERNAL-IP or DNS>`
- Log in with the username and password from above.

## Step 8: (Optional) Change Admin Password

After logging in for the first time, go to **User Info > Change Password** and update the admin password.

## Step 9: (Optional) Clean Up Security

- Restrict AWS Security Group on the Load Balancer to only your IP or organization.
- For production: Use Ingress, SSL certs, SSO, and restrict the `admin` account.

---

# Quick Copy-Paste Commands

```bash
#kubectl create namespace argocd
kubectl apply  -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
kubectl patch svc argocd-server -p '{"spec": {"type": "LoadBalancer"}}'
kubectl get svc argocd-server 
kubectl get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
```
### IF YOU USE DEFAULT NAMESPACE THEN WE HAVE TO CREATE ARGOCD-APPLICATION-CONTROLLER.YAML WITH BELOW CODE

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: argocd-application-controller-cluster-admin
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: argocd-application-controller
  namespace: default

---

*Generated by Mentor (ChatGPT) on 2025-07-01*
